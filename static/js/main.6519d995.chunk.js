(this.webpackJsonptravel=this.webpackJsonptravel||[]).push([[0],[,function(e,t,a){e.exports={container:"styles_container__YpZd6",row:"styles_row__3RWRG",date:"styles_date__3uitB",price:"styles_price__2SPtO",weatherContent:"styles_weatherContent__3lCwH",weather:"styles_weather__yFQmH",temp:"styles_temp__1JcbR",icon:"styles_icon__2ng59",direction:"styles_direction__1OP6r",btn:"styles_btn__3x5wx"}},function(e,t,a){e.exports={container:"styles_container__3eQ69",row:"styles_row__32s-U",title:"styles_title__23wcw",btnGroup:"styles_btnGroup__3gGfE",tab:"styles_tab__3l0wT",selected:"styles_selected__8MzEk"}},function(e,t,a){e.exports={container:"styles_container__2rBeX",week:"styles_week__3qcfH",city:"styles_city__v9ONn",cover:"styles_cover__1OUyL",title:"styles_title__2mBIS"}},,function(e,t,a){e.exports={container:"styles_container__28gg0",error:"styles_error__O01q6",loader:"styles_loader__2nYGJ",load7:"styles_load7__aXSCo"}},,,function(e,t,a){e.exports=a(14)},,,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),c=a.n(o),l=(a(13),a(4)),s=a(1),i=a.n(s),d=function(e){var t=e.temp,a=e.condition;return r.a.createElement("div",{className:i.a.weather},r.a.createElement("div",{className:i.a.temp},r.a.createElement("span",null,t),r.a.createElement("sup",null,"\xb0C")),r.a.createElement("div",{className:i.a.icon},r.a.createElement("img",{src:"/travel-app/assets/weather/".concat(a.toLowerCase(),".svg"),alt:a})))},m=function(e){var t=e.dateMs,a=e.tempFrom,n=e.tempTo,o=e.conditionFrom,c=e.conditionTo,l=e.flyFromCode,s=e.flyToCode,m=e.price,u=new Date(t),_=u.getDate(),f=u.toLocaleString("default",{month:"short"});return r.a.createElement("div",{className:i.a.container},r.a.createElement("div",{className:i.a.row},r.a.createElement("div",{className:i.a.date},r.a.createElement("b",null,_),r.a.createElement("span",null,f)),r.a.createElement("div",{className:i.a.weatherContent},r.a.createElement(d,{temp:a,condition:o}),r.a.createElement("div",{className:i.a.direction},l," \u2b62 ",s),r.a.createElement(d,{temp:n,condition:c})),r.a.createElement("div",{className:i.a.price},m),r.a.createElement("div",{className:i.a.btn},"Book Now")))},u=a(5),_=a.n(u),f=function(e){var t=null;switch(e.type){case"error":t=r.a.createElement("div",{className:_.a.error},"Something went wrong.");break;case"loading":t=r.a.createElement("div",{className:_.a.loader})}return r.a.createElement("div",{className:_.a.container},t)},p={data:null,loading:!1,error:null};function E(e,t){var a=t.type,n=t.error,r=t.data;switch(a){case"FETCH_REQUEST":return{data:null,error:null,loading:!0};case"FETCH_SUCCESS":return{data:r,error:null,loading:!1};case"FETCH_ERROR":return{error:n,data:null,loading:!1};default:return e}}var y={};var v=function(e){var t=Object(n.useReducer)(E,p),a=Object(l.a)(t,2),r=a[0],o=r.error,c=r.data,s=r.loading,i=a[1];return Object(n.useEffect)((function(){if(y[e])return i({type:"FETCH_SUCCESS",data:y[e]});var t=new AbortController,a=t.signal;return i({type:"FETCH_REQUEST"}),fetch(e,{signal:a}).then((function(e){if(!e.ok)throw Error("Fetch Error: { code: ".concat(e.status,", message: ").concat(e.statusText," }"));return e.json()})).then((function(t){y[e]=t,i({type:"FETCH_SUCCESS",data:t})})).catch((function(e){a.aborted||i({type:"FETCH_ERROR",error:e})})),function(){t.abort()}}),[e]),{error:o,data:c,loading:s}},w=function(e){var t=e.getDate(),a=e.getMonth()+1,n=a<10?"0".concat(a):a,r=e.getFullYear();return"".concat(t,"/").concat(n,"/").concat(r)},h=function(e){var t=e.children,a=e.lat,n=e.lon,o=v(function(e){var t=e.lat,a=e.lon;return"https://api.openweathermap.org/data/2.5/onecall?units=metric&lat=".concat(t,"&lon=").concat(a,"&\n\texclude=hourly,current&appid=").concat("8358372df4c3473cfb5f592d22e3d14c")}({lat:a,lon:n})),c=o.loading,l=o.error,s=o.data;return c?r.a.createElement(f,{type:"loading"}):l?r.a.createElement(f,{type:"error"}):s&&t?t(s.daily.slice(0,7)):null},g=function(e){var t=e.children,a=e.flyFromCode,n=e.flyToCode,o=function(e){var t=new Date,a=new Date(Date.now()+24*e*60*60*1e3);return{dateFrom:w(t),dateTo:w(a)}}(7),c=o.dateFrom,l=o.dateTo,s=v(function(e){var t=e.flyFromCode,a=e.flyToCode,n=e.dateFrom,r=e.dateTo;return"https://api.skypicker.com/flights?flyFrom=".concat(t,"&to=").concat(a,"&dateFrom=").concat(n,"&dateTo=").concat(r,"&partner=picky&v=3")}({flyFromCode:a,flyToCode:n,dateFrom:c,dateTo:l})),i=s.loading,d=s.error,m=s.data;if(i)return r.a.createElement(f,{type:"loading"});if(d)return r.a.createElement(f,{type:"error"});var u=m&&m.data.reduce((function(e,t){var a=new Date(1e3*t.dTime).getDate(),n=t.price;return e[a]||(e[a]=n),e[a]>n&&(e[a]=n),e}),{});return u&&t?t(u):null},C=a(3),T=a.n(C),F=function(e){var t=e.flyFrom,a=e.flyTo,n=e.weatherDeparture;return r.a.createElement("div",{className:T.a.container},r.a.createElement("div",{className:T.a.city},r.a.createElement("div",{className:T.a.title},t.name," \u2b62 ",r.a.createElement("b",null,a.name)),r.a.createElement("div",{className:T.a.cover},r.a.createElement("img",{src:"/travel-app/assets/cities/".concat(a.code.toLowerCase(),".jpg"),alt:a.name}))),r.a.createElement(h,{lat:a.coords.lat,lon:a.coords.lon},(function(e){return r.a.createElement(g,{flyFromCode:t.code,flyToCode:a.code},(function(o){return r.a.createElement("div",{className:T.a.week},e.map((function(e,c){var l=new Date(1e3*e.dt).getDate(),s=o[l],i="".concat(s," \u20ac");return s?r.a.createElement(m,{key:e.dt,price:i,tempFrom:Math.round(n[c].temp.day),conditionFrom:n[c].weather[0].main,dateMs:1e3*e.dt,flyToCode:a.code,flyFromCode:t.code,tempTo:Math.round(e.temp.day),conditionTo:e.weather[0].main}):null})))}))})))},N=[{name:"Amsterdam",coords:{lat:52.3667,lon:4.8945},code:"AMS"},{name:"Madrid",coords:{lat:40.4168,lon:3.7038},code:"MAD"},{name:"Budapest",coords:{lat:47.4979,lon:19.0402},code:"BUD"}],b=a(2),S=a.n(b),k=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],o=t[1];return r.a.createElement("div",{className:S.a.container},r.a.createElement("div",null,r.a.createElement("h2",{className:S.a.title},"You want to fly from"),r.a.createElement("p",{className:S.a.btnGroup},N.map((function(e){return r.a.createElement("span",{className:"".concat(S.a.tab," ").concat(e.code===(null===a||void 0===a?void 0:a.code)?S.a.selected:""),key:e.name,onClick:function(){o(e)}},e.name)})))),a&&r.a.createElement("div",null,r.a.createElement("h2",{className:S.a.title},"You have a few flight options: "),r.a.createElement("div",{className:S.a.row},r.a.createElement(h,{lat:a.coords.lat,lon:a.coords.lon},(function(e){return N.filter((function(e){return e.code!==a.code})).map((function(t){return r.a.createElement(F,{key:t.code,flyTo:t,flyFrom:a,weatherDeparture:e})}))})))))},D=function(){return r.a.createElement("div",{className:S.a.mainView},r.a.createElement(k,null))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null)),document.getElementById("root"))}],[[8,1,2]]]);
//# sourceMappingURL=main.6519d995.chunk.js.map